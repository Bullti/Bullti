<!DOCTYPE html>
<html xmlns:th="http//www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="/webjars/jquery/jquery.min.js"></script>
<script type="text/javascript"
	src="//dapi.kakao.com/v2/maps/sdk.js?appkey=022e1af6535b7180359a6f22f16fb181&libraries=services"></script>
<script src="/js/mapConvertGridXy.js"></script>
<script>
	function weatherInfo() {
		// 주소-좌표 변환 객체를 생성합니다
		var geocoder = new kakao.maps.services.Geocoder();
		var rs;
		// 주소로 좌표를 검색합니다
		geocoder.addressSearch('상계동', function(result, status) {
			// 정상적으로 검색이 완료됐으면 
			if (status === kakao.maps.services.Status.OK) {
				var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
				console.log("경도:" + result[0].x);//경도
				console.log("위도:" + result[0].y);//위도

				rs = dfs_xy_conv("toXY", result[0].y, result[0].x);
				console.log("x:" + rs.x);
				console.log("y:" + rs.y);

				$.ajax({
					url : "/weather",
					data : rs,
					success : function(resulthtml) {
						$("#weather-data").html(resulthtml);
					}
				});
			}
		});

	}
	///////////////////////////////////////

	///////////////////////////////////////
</script>
</head>
<body>
<div>
<button onclick="weatherInfo()">딸깍</button>
</div>
	<ul class="flex">
		<th:block th:each="dto:${list}">
			<li th:if='${dto.category eq "T1H" or dto.category eq "REH" }'>
				<span th:if="${dto.category eq 'T1H'}">기온:</span> <span
				th:if="${dto.category eq 'REH'}">습도:</span> <span
				th:text="${dto.obsrValue}">obsrValue</span> <span
				th:if="${dto.category eq 'T1H'}">℃</span> <span
				th:if="${dto.category eq 'REH'}">%</span>
			</li>
		</th:block>
	</ul>
</body>
</html>